## 1、简介
HaaS-JS轻应用（简称JS轻应用）是基于轻量级的quickjs解析引擎开发的，可运行在轻量级IoT设备上的JavaScript应用。

<div align="left">
<img src=./images/haas-js-brief.png width=70%/>
</div>

相比传统嵌入式开发模式，HaaS-JS轻应用有以下区别，
- 传统嵌入式软件开发一般采用C/C++语言开发，常见的开发流程包括开发环境搭建、代码移植、编译链接、烧写、调试、工厂批量生产等环节，周期长，难度高。
- JS轻应用开发模式中，基础固件在模组生产时一次烧录，后续产品开发仅需要开发和更新JS脚本，无需关心C代码开发和固件更新，开发流程更加简单。
- JS轻应用依托庞大的JavaScript生态库和持续丰富的外设驱动组件，可以快速的构建用户的物联网应用。
- JS轻应用集成了阿里云IoT云端一体服务，仅需几行脚本即可让设备快速上云，享受云端一体服务。

<br>

## 2、原理
下图描述了JS轻应用的运行原理，

<div align="left">
<img src=./images/haas-js-workflow.png width=70%/>
</div>

主要步骤包含以下三步，
- 解析：将JavaScript文件解析成字符串。
- 调用：quickjs引擎将JavaScript字符串解析成对应可调用的C代码。
- 执行：通过C代码对底层硬件进行操作，实现具体功能。

<br>

一个最简单的JS轻应用由两个文件组成，分别是，

|文件|必需？|说明|
|-----|:---:|----|
| app.js | 是 | 轻应用JS脚本入口文件 |
| app.json | 是 | 轻应用JS对硬件IO的抽象 |

<br>

## 3、支持的组件
JS轻应用目前支持的组件能力分为基础组建和高级组件两类，基础组件顾名思义就是支持物联网设备基础能力开发的组件， 例如文件系统，硬件IO，外设，网络协议等。高级组件是指支持HaaS云端一体服务开发的高阶能力，例如阿里云物联网平台连接组件，阿里云TTS服务组件，阿里云千里传音服务组件等。

<br>

基础组件：
- 文件系统 FS
- 系统信息 SYS
- 键值对存储 KV
- 电源管理 PM
- 硬件I/O UART/GPIO/I2C/SPI
- 模数转换 ADC
- 脉宽调制 PWM
- 定时器 TIMER
- 实时时钟 RTC
- 看门狗 WDG
- 网络协议 UDP/TCP/HTTP/MQTT
- 其他

<br>

高级组件：
- 物联网平台连接组件
- 支付组件
- 语音组件
- 传感器服务组件
- 定位服务组件
- 其他

<br>

此外还有大量外设驱动库，例如：编码电机/步进电机/伺服电机/继电器/麦克风/语音录放模块/扬声器/PS2摇杆/电容触摸/按键/TFT彩屏/数码管/三色灯/加速度计/陀螺仪/电子罗盘/气压计/磁力计/温湿度/颜色/光照强度等等。
